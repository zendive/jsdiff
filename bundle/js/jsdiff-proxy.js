(()=>{"use strict";var f={};const a={EMPTY:"\u27EAempty\u27EB",UNDEFINED:"\u27EAundefined\u27EB",NULL:"\u27EAnull\u27EB",NATIVE_FUNCTION:"\u0192\u27EAnative\u27EB",EXCEPTION_FALLBACK:"\u2049\uFE0F \u27EAexception\u27EB",EXCEPTION:e=>`\u2049\uFE0F \u27EA${e}\u27EB`,RECURRING_ARRAY:e=>`0x${e}: [\u267B\uFE0F]`,RECURRING_OBJECT:e=>`0x${e}: {\u267B\uFE0F}`,RECURRING_SET:e=>`0x${e}: Set[\u267B\uFE0F]`,RECURRING_MAP:e=>`0x${e}: Map{\u267B\uFE0F}`,UNSERIALIZABLE:e=>`0x${e}: \u27EAunserializable\u27EB`,SYMBOL:(e,s)=>`0x${s}: ${e}`,FUNCTION:(e,s)=>`\u0192${e?` ${e}`:""}\u27EA${s}\u27EB`,NUMERIC:e=>typeof e=="bigint"?`BigInt\u27EA${e}\u27EB`:`Number\u27EA${e}\u27EB`},t={NO_CONNECTION:"Could not establish connection. Receiving end does not exist.",PORT_CLOSED:"The message port closed before a response was received.",QUOTA_EXCEEDED:"QUOTA_BYTES quota exceeded"};function n(e,s){return function(o){o.source===window&&typeof o.data=="object"&&o.data!==null&&(o.data.source==="jsdiff-console-to-proxy-inprogress"?e(o):o.data.source==="jsdiff-console-to-proxy-compare"&&s(o))}}async function E(e){try{const s=e.data.payload,{lastApiReq:o}=await chrome.storage.local.get(["lastApiReq"]),l=u(o,s);await chrome.storage.local.set({lastApiReq:l,lastError:""}),chrome.runtime.sendMessage({source:"jsdiff-proxy-to-panel-compare"},r)}catch(s){s?.message===t.QUOTA_EXCEEDED?(await chrome.storage.local.set({lastError:t.QUOTA_EXCEEDED}),chrome.runtime.sendMessage({source:"jsdiff-proxy-to-panel-error"},r)):s?.message&&console.error("Unhnadled",s.message)}}function i(e){chrome.runtime.sendMessage({source:"jsdiff-proxy-to-panel-inprogress",on:e.data.on},r)}function u(e,s){e||(e={left:a.EMPTY,right:a.EMPTY,timestamp:Date.now()});const o=e;return Reflect.has(s,"push")?(o.left=o.right,o.right=s.push):(Reflect.has(s,"left")&&(o.left=s.left),Reflect.has(s,"right")&&(o.right=s.right)),o.timestamp=s.timestamp,o}function r(){c(chrome.runtime.lastError)||console.error(chrome.runtime.lastError)}function c(e){return!e||e.message===t.NO_CONNECTION||e.message===t.PORT_CLOSED}window.addEventListener("message",n(i,E))})();
