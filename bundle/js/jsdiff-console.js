(()=>{"use strict";var $={};const o={EMPTY:"\u27EAempty\u27EB",UNDEFINED:"\u27EAundefined\u27EB",NULL:"\u27EAnull\u27EB",NATIVE_FUNCTION:"\u0192\u27EAnative\u27EB",EXCEPTION_FALLBACK:"\u2049\uFE0F \u27EAexception\u27EB",EXCEPTION:e=>`\u2049\uFE0F \u27EA${e}\u27EB`,RECURRING_ARRAY:e=>`0x${e}: [\u267B\uFE0F]`,RECURRING_OBJECT:e=>`0x${e}: {\u267B\uFE0F}`,RECURRING_SET:e=>`0x${e}: Set[\u267B\uFE0F]`,RECURRING_MAP:e=>`0x${e}: Map{\u267B\uFE0F}`,UNSERIALIZABLE:e=>`0x${e}: \u27EAunserializable\u27EB`,SYMBOL:(e,n)=>`0x${n}: ${e}`,FUNCTION:(e,n)=>`\u0192${e?` ${e}`:""}\u27EA${n}\u27EB`,NUMERIC:e=>typeof e=="bigint"?`BigInt\u27EA${e}\u27EB`:`Number\u27EA${e}\u27EB`},z={NO_CONNECTION:"Could not establish connection. Receiving end does not exist.",PORT_CLOSED:"The message port closed before a response was received.",QUOTA_EXCEEDED:"QUOTA_BYTES quota exceeded"};function Y(e){return e!=null}async function M(e){const n=new TextEncoder().encode(e),t=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(t)).map(s=>s.toString(16).padStart(2,"0").toUpperCase()).join("")}var _=function(e,n,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?e!==n||!r:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(e,t):r?r.value=t:n.set(e,t),t},f=function(e,n,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!i:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(e):i?i.value:n.get(e)},R,a,u,I;class j{constructor(){R.add(this),a.set(this,void 0),u.set(this,0),_(this,a,new Map,"f")}clear(){f(this,a,"f").clear()}lookup(n,t){var i;let r=f(this,a,"f").get(n);if(!r){_(this,u,(i=f(this,u,"f"),++i),"f");const s=f(this,R,"m",I).call(this,f(this,u,"f"));r={name:N(n)?t(n.toString(),s):t(s),seen:!1},f(this,a,"f").set(n,r)}return r}}a=new WeakMap,u=new WeakMap,R=new WeakSet,I=function(n){return n.toString(16).padStart(4,"0")};async function l(e,n){try{window.postMessage({source:"jsdiff-console-to-proxy-inprogress",on:!0},"*");for(const t of["push","left","right"])if(Reflect.has(n,t)){const i=n[t];i===void 0?n[t]=o.UNDEFINED:i===null?n[t]=o.NULL:n[t]=await e(i)}window.postMessage({source:"jsdiff-console-to-proxy-compare",payload:n},"*")}catch(t){console.error("console.diff()",t),window.postMessage({source:"jsdiff-console-to-proxy-inprogress",on:!1},"*")}}async function D(e){let n=new Set;const t=JSON.parse(JSON.stringify(e,x.bind(null,n)));return n.clear(),n=null,t}async function E(e){let n=new j;const t=await d(n,e);return n.clear(),n=null,t}async function d(e,n){let t=n;if(y(n)){const{name:i}=e.lookup(n,o.UNSERIALIZABLE);t=i}else if(C(n))t=await b(n);else if(N(n)){const{name:i}=e.lookup(n,o.SYMBOL);t=i}else h(n)?t=await U(e,n,o.RECURRING_ARRAY):T(n)?t=await U(e,n,o.RECURRING_SET):g(n)?t=await L(e,n):A(n)?t=await F(e,n):O(n)?t=o.NUMERIC(n):n===void 0&&(t=o.UNDEFINED);return t}function O(e){return typeof e=="bigint"||Number.isNaN(e)||e===-1/0||e===1/0}async function U(e,n,t){const i=e.lookup(n,t);let r;if(i.seen)r=i.name;else{i.seen=!0;const s=[];for(const c of n)s.push(await d(e,c));r=s}return r}async function L(e,n){const t=e.lookup(n,o.RECURRING_MAP);let i;if(t.seen)i=t.name;else{t.seen=!0;const r={};for(const[s,c]of n){const p=await B(e,s),w=await d(e,c);r[p]=w}i=r}return i}async function B(e,n){let t;if(y(n)){const{name:i}=e.lookup(n,o.UNSERIALIZABLE);t=i}else if(C(n))t=await b(n);else if(N(n)){const{name:i}=e.lookup(n,o.SYMBOL);t=i}else if(h(n)){const{name:i}=e.lookup(n,o.RECURRING_ARRAY);t=i}else if(T(n)){const{name:i}=e.lookup(n,o.RECURRING_SET);t=i}else if(g(n)){const{name:i}=e.lookup(n,o.RECURRING_MAP);t=i}else if(A(n)){const{name:i}=e.lookup(n,o.RECURRING_OBJECT);t=i}else O(n)?t=o.NUMERIC(n):n===void 0?t=o.UNDEFINED:t=String(n);return t}async function F(e,n){const t=e.lookup(n,o.RECURRING_OBJECT);let i;if(t.seen)i=t.name;else if(t.seen=!0,G(n)){const r=P(n);i=await d(e,r)}else{const r={},s=Reflect.ownKeys(n);for(const c of s){let p,w;if(N(c)){const{name:S}=e.lookup(c,o.SYMBOL);p=S}else p=c;try{w=await d(e,n[c])}catch(S){w=m(S)}r[p]=w}i=r}return i}async function b(e){const n=e.toString();if(n.endsWith("{ [native code] }"))return o.NATIVE_FUNCTION;{const t=await M(n);return o.FUNCTION(e.name,t)}}function P(e){let n;try{n=e.toJSON()}catch(t){n=m(t)}return n}function m(e){return typeof e?.toString=="function"?o.EXCEPTION(e.toString()):o.EXCEPTION_FALLBACK}function x(e,n,t){try{if(y(t))return;if(C(t))return t.toString();if(A(t)){if(e.has(t))return;e.add(t)}return t}catch(i){return m(i)}}function h(e){return e instanceof Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof BigUint64Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof BigInt64Array||e instanceof Float32Array||e instanceof Float64Array}function C(e){return typeof e=="function"&&"toString"in e&&typeof e.toString=="function"}function T(e){return e instanceof Set}function g(e){return e instanceof Map}function G(e){let n;try{n=e!==null&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}catch{n=!1}return n}function y(e){return e instanceof Element||e instanceof Document}function N(e){return typeof e=="symbol"}function A(e){return e!==null&&typeof e=="object"||e instanceof Object}Object.assign(console,{diff:(...e)=>{l(E,e.length===1?{push:e[0],timestamp:Date.now()}:{left:e[0],right:e[1],timestamp:Date.now()})},diffLeft:e=>{l(E,{left:e,timestamp:Date.now()})},diffRight:e=>{l(E,{right:e,timestamp:Date.now()})},diffPush:e=>{l(E,{push:e,timestamp:Date.now()})},diff_:(...e)=>{l(D,e.length===1?{push:e[0],timestamp:Date.now()}:{left:e[0],right:e[1],timestamp:Date.now()})}}),console.debug("\u271A console.diff()")})();
