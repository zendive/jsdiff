(()=>{"use strict";var h={};const i={EMPTY:"\u27EAempty\u27EB",UNDEFINED:"\u27EAundefined\u27EB",NULL:"\u27EAnull\u27EB",NATIVE_FUNCTION:"\u0192\u27EAnative\u27EB",EXCEPTION_FALLBACK:"\u2049\uFE0F \u27EAexception\u27EB",EXCEPTION:n=>`\u2049\uFE0F \u27EA${n}\u27EB`,RECURRING_ARRAY:n=>`0x${n}: [\u267B\uFE0F]`,RECURRING_OBJECT:n=>`0x${n}: {\u267B\uFE0F}`,RECURRING_SET:n=>`0x${n}: Set[\u267B\uFE0F]`,RECURRING_MAP:n=>`0x${n}: Map{\u267B\uFE0F}`,UNSERIALIZABLE:n=>`0x${n}: \u27EAunserializable\u27EB`,SYMBOL:(n,e)=>`0x${e}: ${n}`,FUNCTION:(n,e)=>`\u0192${n?` ${n}`:""}\u27EA${e}\u27EB`,NUMERIC:n=>typeof n=="bigint"?`BigInt\u27EA${n}\u27EB`:`Number\u27EA${n}\u27EB`},j={NO_CONNECTION:"Could not establish connection. Receiving end does not exist.",PORT_CLOSED:"The message port closed before a response was received.",QUOTA_EXCEEDED:"QUOTA_BYTES quota exceeded"};function x(n){return n!=null}async function B(n){const e=new TextEncoder().encode(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(r=>r.toString(16).padStart(2,"0").toUpperCase()).join("")}class b{#n;#e=0;constructor(){this.#n=new Map}clear(){this.#n.clear()}#t(e){return e.toString(16).padStart(4,"0")}lookup(e,t){let o=this.#n.get(e);if(!o){++this.#e;const s=this.#t(this.#e);o={name:p(e)?t(e.toString(),s):t(s),seen:!1},this.#n.set(e,o)}return o}}async function f(n,e){try{window.postMessage({source:"jsdiff-console-to-proxy-inprogress",on:!0},"*");for(const t of["push","left","right"])if(Reflect.has(e,t)){const o=e[t];o===void 0?e[t]=i.UNDEFINED:o===null?e[t]=i.NULL:e[t]=await n(o)}window.postMessage({source:"jsdiff-console-to-proxy-compare",payload:e},"*")}catch(t){console.error("console.diff()",t),window.postMessage({source:"jsdiff-console-to-proxy-inprogress",on:!1},"*")}}async function F(n){let e=new Set;const t=JSON.parse(JSON.stringify(n,M.bind(null,e)));return e.clear(),e=null,t}async function l(n){let e=new b;const t=await u(e,n);return e.clear(),e=null,t}async function u(n,e){let t=e;if(R(e)){const{name:o}=n.lookup(e,i.UNSERIALIZABLE);t=o}else if(N(e))t=await y(e);else if(p(e)){const{name:o}=n.lookup(e,i.SYMBOL);t=o}else m(e)?t=await S(n,e,i.RECURRING_ARRAY):C(e)?t=await S(n,e,i.RECURRING_SET):U(e)?t=await T(n,e):d(e)?t=await D(n,e):I(e)?t=i.NUMERIC(e):e===void 0&&(t=i.UNDEFINED);return t}function I(n){return typeof n=="bigint"||Number.isNaN(n)||n===-1/0||n===1/0}async function S(n,e,t){const o=n.lookup(e,t);let s;if(o.seen)s=o.name;else{o.seen=!0;const r=[];for(const c of e)r.push(await u(n,c));s=r}return s}async function T(n,e){const t=n.lookup(e,i.RECURRING_MAP);let o;if(t.seen)o=t.name;else{t.seen=!0;const s={};for(const[r,c]of e){const E=await _(n,r),a=await u(n,c);s[E]=a}o=s}return o}async function _(n,e){let t;if(R(e)){const{name:o}=n.lookup(e,i.UNSERIALIZABLE);t=o}else if(N(e))t=await y(e);else if(p(e)){const{name:o}=n.lookup(e,i.SYMBOL);t=o}else if(m(e)){const{name:o}=n.lookup(e,i.RECURRING_ARRAY);t=o}else if(C(e)){const{name:o}=n.lookup(e,i.RECURRING_SET);t=o}else if(U(e)){const{name:o}=n.lookup(e,i.RECURRING_MAP);t=o}else if(d(e)){const{name:o}=n.lookup(e,i.RECURRING_OBJECT);t=o}else I(e)?t=i.NUMERIC(e):e===void 0?t=i.UNDEFINED:t=String(e);return t}async function D(n,e){const t=n.lookup(e,i.RECURRING_OBJECT);let o;if(t.seen)o=t.name;else if(t.seen=!0,g(e)){const s=L(e);o=await u(n,s)}else{const s={},r=Reflect.ownKeys(e);for(const c of r){let E,a;if(p(c)){const{name:w}=n.lookup(c,i.SYMBOL);E=w}else E=c;try{a=await u(n,e[c])}catch(w){a=A(w)}s[E]=a}o=s}return o}async function y(n){const e=n.toString();if(e.endsWith("{ [native code] }"))return i.NATIVE_FUNCTION;{const t=await B(e);return i.FUNCTION(n.name,t)}}function L(n){let e;try{e=n.toJSON()}catch(t){e=A(t)}return e}function A(n){return typeof n?.toString=="function"?i.EXCEPTION(n.toString()):i.EXCEPTION_FALLBACK}function M(n,e,t){try{if(R(t))return;if(N(t))return t.toString();if(d(t)){if(n.has(t))return;n.add(t)}return t}catch(o){return A(o)}}function m(n){return n instanceof Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Uint16Array||n instanceof Uint32Array||n instanceof BigUint64Array||n instanceof Int8Array||n instanceof Int16Array||n instanceof Int32Array||n instanceof BigInt64Array||n instanceof Float32Array||n instanceof Float64Array}function N(n){return typeof n=="function"&&"toString"in n&&typeof n.toString=="function"}function C(n){return n instanceof Set}function U(n){return n instanceof Map}function g(n){let e;try{e=n!==null&&typeof n=="object"&&"toJSON"in n&&typeof n.toJSON=="function"}catch{e=!1}return e}function R(n){return n instanceof Element||n instanceof Document}function p(n){return typeof n=="symbol"}function d(n){return n!==null&&typeof n=="object"||n instanceof Object}const O={diff:(...n)=>{f(l,n.length===1?{push:n[0],timestamp:Date.now()}:{left:n[0],right:n[1],timestamp:Date.now()})},diffLeft:n=>{f(l,{left:n,timestamp:Date.now()})},diffRight:n=>{f(l,{right:n,timestamp:Date.now()})},diffPush:n=>{f(l,{push:n,timestamp:Date.now()})},diff_:(...n)=>{f(F,n.length===1?{push:n[0],timestamp:Date.now()}:{left:n[0],right:n[1],timestamp:Date.now()})}};typeof browser>"u"?(Object.assign(console,O),console.debug("\u271A console.diff()")):typeof cloneInto=="function"&&(window.wrappedJSObject.jsdiff=cloneInto(O,window,{cloneFunctions:!0}),console.debug("\u271A jsdiff.diff()"))})();
